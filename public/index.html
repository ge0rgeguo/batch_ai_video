<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n="app.title">AIè§†é¢‘æ‰¹é‡ç”Ÿæˆ</title>
  <link rel="stylesheet" href="/css/app.css?v=20251231-1" />

  <!-- Import Map for ES Module Versioning -->
  <script type="importmap">
  {
    "imports": {
      "/js/constants.js": "/js/constants.js?v=20251231-6",
      "/js/state.js": "/js/state.js?v=20251231-6",
      "/js/toast.js": "/js/toast.js?v=20251231-6",
      "/js/ui.js": "/js/ui.js?v=20251231-6",
      "/js/credits.js": "/js/credits.js?v=20251231-6",
      "/js/api.js": "/js/api.js?v=20251231-6",
      "/js/i18n.js": "/js/i18n.js?v=20251231-6",
      "/js/events.js": "/js/events.js?v=20251231-6",
      "/js/app.js": "/js/app.js?v=20251231-6"
    },
    "scopes": {
      "/js/": {
        "./constants.js": "/js/constants.js?v=20251231-6",
        "./state.js": "/js/state.js?v=20251231-6",
        "./toast.js": "/js/toast.js?v=20251231-6",
        "./ui.js": "/js/ui.js?v=20251231-6",
        "./credits.js": "/js/credits.js?v=20251231-6",
        "./api.js": "/js/api.js?v=20251231-6",
        "./i18n.js": "/js/i18n.js?v=20251231-6",
        "./events.js": "/js/events.js?v=20251231-6"
      }
    }
  }
  </script>
</head>

<body>
  <div id="toast-container"></div>

  <div id="login-container" class="login-container">
    <header class="landing-header">
      <nav class="nav-container">
        <div class="brand">
          <div class="brand-badge">Z</div>
          <span data-i18n="nav.brand">åšè§†é¢‘ Â· AI è§†é¢‘å†…å®¹ç”Ÿäº§å¹³å°</span>
        </div>
        <div class="nav-cta">
          <button class="btn btn-secondary" type="button" id="lang-toggle-btn"
            data-i18n="lang.toggle">English/ä¸­æ–‡</button>

          <div class="contact-wrapper" id="contactTrigger">
            <button class="btn btn-secondary" type="button" data-i18n="nav.contact">è”ç³»å®¢æœ</button>
            <div class="contact-popover" role="dialog" aria-hidden="true">
              <img src="/img/contact-qr.png" alt="è”ç³»å®¢æœäºŒç»´ç " />
              <span data-i18n="nav.contact.qr">å¾®ä¿¡æ‰«ç è”ç³»ï¼šé½å¥¥è‡³</span>
            </div>
          </div>
          <button class="btn btn-primary" type="button" id="nav-login-btn" data-i18n="nav.login">ç™»å½•</button>
        </div>
      </nav>
    </header>

    <main class="landing-main">
      <section class="hero">

        <h1 data-i18n="hero.title">æ‰¹é‡åˆ¶ä½œï¼Œé«˜è´¨é‡ï¼Œæ— æ°´å° AI è§†é¢‘</h1>
        <p class="hero-subtitle" data-i18n="hero.subtitle">ä¸€é”®ç”Ÿæˆç”µå•†è¥é”€è§†é¢‘ï¼Œæ”¯æŒ Sora 2 & Pro æ¨¡å‹</p>
        <div class="hero-actions">
          <button class="btn btn-primary btn-xl" type="button" id="hero-login-btn" data-i18n="hero.cta">ç«‹å³ç™»å½•</button>
        </div>
      </section>

      <section class="models-section">
        <div class="models-grid">
          <article class="model-card">
            <div class="model-label" data-i18n="model.sora2.label">Sora2</div>
            <div class="model-meta">
              <span class="meta-chip">720p</span>
              <span class="meta-chip">10s / 15s</span>
              <span class="meta-chip">50 items</span>
            </div>
            <ul class="model-params">
              <li data-i18n="model.sora2.params.1">æ–¹å‘ï¼šæ¨ªå‘ 16:9ã€çºµå‘ 9:16</li>
              <li data-i18n="model.sora2.params.2">å°ºå¯¸ï¼š720p</li>
              <li data-i18n="model.sora2.params.3">æ—¶é•¿ï¼š10ç§’ / 15ç§’</li>
              <li data-i18n="model.sora2.params.4">ç§¯åˆ†ï¼š10åˆ† / 15åˆ†</li>
              <li data-i18n="model.sora2.params.5">æ‰¹é‡ï¼šåŒæ—¶æ”¯æŒ10ä¸ªä»»åŠ¡ï¼Œå•ä¸ªä»»åŠ¡æ”¯æŒ50æ¡</li>
            </ul>
            <p class="model-note" data-i18n="model.sora2.desc">é€‚åˆæ—¥å¸¸æ‰¹é‡ç”Ÿæˆã€å¿«é€Ÿå¤åˆ»å•†å“çŸ­è§†é¢‘ã€‚</p>
          </article>
          <article class="model-card">
            <div class="model-label" data-i18n="model.sora2pro.label">Sora2 Pro</div>
            <div class="model-meta">
              <span class="meta-chip">1080p</span>
              <span class="meta-chip">Max 25s</span>
              <span class="meta-chip">50 items</span>
            </div>
            <ul class="model-params">
              <li data-i18n="model.sora2pro.params.1">æ–¹å‘ï¼šæ¨ªå‘ 16:9ã€çºµå‘ 9:16</li>
              <li data-i18n="model.sora2pro.params.2">å°ºå¯¸ï¼š1080p</li>
              <li data-i18n="model.sora2pro.params.3">æ—¶é•¿ï¼š10ç§’ / 15ç§’ / 25ç§’</li>
              <li data-i18n="model.sora2pro.params.4">ç§¯åˆ†ï¼š50åˆ† / 75åˆ† / 100åˆ†</li>
              <li data-i18n="model.sora2pro.params.5">æ‰¹é‡ï¼šåŒæ—¶æ”¯æŒ10ä¸ªä»»åŠ¡ï¼Œå•ä¸ªä»»åŠ¡æ”¯æŒ50æ¡</li>
            </ul>
            <p class="model-note" data-i18n="model.sora2pro.desc">é€‚åˆé«˜è´¨é‡æŠ•æ”¾ç´ æã€é‡ç‚¹æ´»åŠ¨ä¸»è§†é¢‘ç­‰åœºæ™¯ã€‚</p>
          </article>
        </div>
      </section>
    </main>
  </div>

  <div id="auth-container" class="auth-container hidden">
    <div class="auth-header">
      <button type="button" class="btn btn-link back-home-btn" id="back-home-btn" data-i18n="auth.back">â† è¿”å›é¦–é¡µ</button>
    </div>
    <div class="auth-content">
      <div class="auth-columns">
        <div class="login-pane" id="auth-login">
          <h2 class="auth-card-title" data-i18n="auth.login.title">ç™»å½•åˆ° AI è§†é¢‘ç”Ÿæˆå¹³å°</h2>
          <div class="login-card" id="login-card">
            <!-- Google OAuth ç™»å½• -->
            <div class="oauth-section">
              <a href="/api/auth/google/login" class="google-login-btn" id="google-login-btn">
                <svg class="google-icon" viewBox="0 0 24 24" width="20" height="20">
                  <path fill="#4285F4"
                    d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" />
                  <path fill="#34A853"
                    d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" />
                  <path fill="#FBBC05"
                    d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" />
                  <path fill="#EA4335"
                    d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" />
                </svg>
                <span data-i18n="auth.btn.google">ä½¿ç”¨ Google è´¦å·ç™»å½•</span>
              </a>
            </div>

            <div class="login-divider">
              <span data-i18n="auth.divider">æˆ–ä½¿ç”¨ä»¥ä¸‹æ–¹å¼</span>
            </div>

            <div class="login-tabs" id="login-tabs">
              <button type="button" class="active" data-login-mode="sms" data-i18n="auth.login.sms">æ‰‹æœºå·å¿«æ·ç™»å½•</button>
              <button type="button" data-login-mode="password" data-i18n="auth.login.password">è´¦å·å¯†ç ç™»å½•</button>
            </div>

            <form id="sms-login-form" class="login-form" autocomplete="off" novalidate>
              <div class="form-group">
                <label for="sms-mobile" data-i18n="auth.field.mobile">æ‰‹æœºå·</label>
                <input type="tel" id="sms-mobile" name="mobile" placeholder="è¯·è¾“å…¥ 11 ä½æ‰‹æœºå·" maxlength="13"
                  data-i18n="auth.placeholder.mobile" />
              </div>
              <div class="form-group">
                <label for="sms-code" data-i18n="auth.field.code">éªŒè¯ç </label>
                <div class="sms-inline">
                  <input type="text" id="sms-code" name="code" placeholder="è¯·è¾“å…¥çŸ­ä¿¡éªŒè¯ç " maxlength="6"
                    data-i18n="auth.placeholder.code" />
                  <button type="button" class="btn btn-secondary" id="sms-send-btn"
                    data-i18n="auth.btn.get_code">è·å–éªŒè¯ç </button>
                </div>
                <div class="sms-countdown hidden" id="sms-countdown"></div>
              </div>
              <button type="submit" class="btn btn-primary" id="sms-login-submit" data-i18n="auth.btn.login">ç™»å½•</button>
              <div class="error-msg" id="sms-login-error"></div>
            </form>

            <form id="login-form" class="login-form hidden" autocomplete="off" novalidate>
              <div class="form-group">
                <label for="login-username" data-i18n="auth.field.username">ç”¨æˆ·å</label>
                <input type="text" id="login-username" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" autocomplete="username"
                  data-i18n="auth.placeholder.username" />
              </div>
              <div class="form-group">
                <label for="login-password" data-i18n="auth.field.password">å¯†ç </label>
                <input type="password" id="login-password" name="password" placeholder="è¯·è¾“å…¥å¯†ç "
                  autocomplete="current-password" data-i18n="auth.placeholder.password" />
              </div>
              <button type="submit" class="btn btn-primary" id="login-submit" data-i18n="auth.btn.login">ç™»å½•</button>
              <div class="error-msg" id="login-error"></div>
            </form>
          </div>
        </div>


      </div>
    </div>
  </div>

  <div id="app-container" class="container hidden">
    <header>
      <div class="header-left">
        <h1 style="cursor:pointer" id="nav-home-btn" data-i18n="app.header.title">ğŸ¬ AIè§†é¢‘æ‰¹é‡ç”Ÿæˆ</h1>
      </div>
      <div class="user-info">
        <span id="user-display"></span>
        <span id="user-credits" class="text-muted clickable" title="ç‚¹å‡»å……å€¼" style="cursor:pointer"></span>
        <button type="button" class="btn btn-secondary" id="logout-btn" data-i18n="app.btn.logout">é€€å‡ºç™»å½•</button>
      </div>
    </header>

    <!-- åˆ›ä½œè§†å›¾ -->
    <div id="view-create" class="view-section">
      <div class="card">
        <div class="three-col-layout">
          <div class="col-image">
            <h3 class="section-title" data-i18n="create.section.image">å›¾ç‰‡</h3>
            <input type="file" id="image-file" class="image-input" accept="image/png, image/jpeg" />
            <div id="image-filename" class="image-filename hidden"></div>
            <img id="thumb" class="hidden" alt="ä¸Šä¼ é¢„è§ˆ" />
            <button type="button" class="btn btn-secondary remove-btn hidden" id="remove-img"
              data-i18n="create.btn.delete_image">åˆ é™¤å›¾ç‰‡</button>
          </div>

          <div class="col-prompt">
            <h3 class="section-title" data-i18n="create.section.prompt">æç¤ºè¯ Prompt</h3>
            <textarea id="prompt" class="prompt-textarea" placeholder="è¯·è¾“å…¥è§†é¢‘ç”Ÿæˆæç¤ºè¯ï¼ˆå¿…å¡«ï¼Œâ‰¤10000å­—ç¬¦ï¼‰"
              data-i18n="create.placeholder.prompt"></textarea>
          </div>

          <div class="col-params">
            <h3 class="section-title" data-i18n="create.section.params">æ¨¡å‹å‚æ•°</h3>
            <div class="param-group">
              <label for="model" data-i18n="create.label.model">æ¨¡å‹</label>
              <select id="model">
                <option value="sora-2-all">Sora 2</option>
                <option value="sora-2-pro-all">Sora 2 Pro</option>
              </select>
            </div>
            <div class="param-group">
              <label for="orientation" data-i18n="create.label.orientation">æ–¹å‘</label>
              <select id="orientation">
                <option value="landscape" data-i18n="create.option.landscape">æ¨ªå‘</option>
                <option value="portrait" data-i18n="create.option.portrait">çºµå‘</option>
              </select>
            </div>
            <div class="param-group">
              <label for="size" data-i18n="create.label.size">å°ºå¯¸</label>
              <select id="size">
                <option value="small">720p</option>
                <option value="large">1080p</option>
              </select>
            </div>
            <div class="param-group">
              <label for="duration" data-i18n="create.label.duration">æ—¶é•¿</label>
              <select id="duration"></select>
            </div>
            <div class="param-group">
              <label for="num-videos" data-i18n="create.label.num_videos">è§†é¢‘æ•°é‡</label>
              <input type="number" id="num-videos" value="1" min="1" max="50" />
            </div>
          </div>
        </div>

        <div class="generate-btn-container">
          <button type="button" class="generate-btn" id="generate-btn" data-i18n="create.btn.generate">ğŸ¬ ç”Ÿæˆè§†é¢‘</button>
        </div>
      </div>

      <div class="card">
        <h3><span data-i18n="batch.title">ä»»åŠ¡ç®¡ç†</span> <span class="text-muted subtitle"
            data-i18n="batch.subtitle">(ç‚¹å‡»è¡ŒæŸ¥çœ‹è¯¦æƒ…)</span></h3>
        <table id="batch-table">
          <thead>
            <tr>
              <th style="width:50px;" data-i18n="batch.col.index">åºå·</th>
              <th style="width:160px;" data-i18n="batch.col.created">åˆ›å»ºæ—¶é—´</th>
              <th style="width:100px;" data-i18n="batch.col.duration">å®Œæˆç”¨æ—¶</th>
              <th style="width:300px;" data-i18n="batch.col.prompt">æç¤ºè¯</th>
              <th style="width:80px;" data-i18n="batch.col.image">å›¾ç‰‡</th>
              <th style="width:160px;" data-i18n="batch.col.status">çŠ¶æ€</th>
              <th style="width:240px;" data-i18n="batch.col.action">æ“ä½œ</th>
            </tr>
          </thead>
          <tbody id="batch-tbody"></tbody>
        </table>

        <div class="pagination">
          <button type="button" class="btn btn-secondary" id="prev-page" data-i18n="batch.btn.prev">ä¸Šä¸€é¡µ</button>
          <div id="page-info" class="text-muted">ç¬¬ 1 / 1 é¡µ</div>
          <button type="button" class="btn btn-secondary" id="next-page" data-i18n="batch.btn.next">ä¸‹ä¸€é¡µ</button>
        </div>
      </div>
    </div>

    <!-- ç§¯åˆ†è§†å›¾ (Overlay) -->
    <div id="view-credits" class="view-section credits-overlay hidden">
      <div class="credits-modal">
        <button type="button" class="close-credits-btn" id="close-credits-btn">Ã—</button>
        <div class="card" style="margin-bottom:0; box-shadow:none;">
          <h2 class="section-title" data-i18n="credits.title">ç§¯åˆ†å……å€¼</h2>
          <div class="recharge-panel">
            <!-- æ”¯ä»˜æ–¹å¼åˆ‡æ¢ Tab -->
            <div class="payment-tabs" id="payment-tabs">
              <button type="button" class="payment-tab active" data-payment-type="wechat">
                <span style="color:#07c160;font-weight:bold;margin-right:4px;">å¾®</span>
                å¾®ä¿¡æ”¯ä»˜
              </button>
              <button type="button" class="payment-tab" data-payment-type="stripe">
                ğŸ’³ ä¿¡ç”¨å¡
              </button>
            </div>

            <!-- Stripe ä¿¡ç”¨å¡æ”¯ä»˜åŒºåŸŸ -->
            <div class="stripe-section hidden" id="stripe-payment-section">
              <div class="recharge-options" id="stripe-packages">
                <div class="recharge-option selected" data-package-id="pkg_100">
                  <div class="credits">100 ç§¯åˆ†</div>
                  <div class="price">$1.99</div>
                </div>
                <div class="recharge-option" data-package-id="pkg_500">
                  <div class="credits">500 ç§¯åˆ†</div>
                  <div class="price">$8.99</div>
                  <div class="badge" data-i18n="misc.hot">çƒ­é”€</div>
                </div>
                <div class="recharge-option" data-package-id="pkg_1000">
                  <div class="credits">1000 ç§¯åˆ†</div>
                  <div class="price">$15.99</div>
                </div>
              </div>
              <div style="text-align:center; margin-top: 20px;">
                <button class="btn btn-primary btn-large" id="btn-stripe-pay">
                  ğŸ’³ ä½¿ç”¨ Stripe æ”¯ä»˜ $<span id="stripe-amount-display">1.99</span>
                </button>
                <div class="tip text-muted">æ”¯æŒ Visaã€Mastercardã€American Express ç­‰</div>
              </div>
            </div>


            <!-- å¾®ä¿¡ CNY æ”¯ä»˜åŒºåŸŸ -->
            <div class="wechat-section" id="wechat-payment-section">
              <div class="recharge-options" id="wechat-packages">
                <div class="recharge-option selected" data-package-id="pkg_100">
                  <div class="credits">100 ç§¯åˆ†</div>
                  <div class="price">Â¥14</div>
                </div>
                <div class="recharge-option" data-package-id="pkg_500">
                  <div class="credits">500 ç§¯åˆ†</div>
                  <div class="price">Â¥64</div>
                  <div class="badge">æ¨è</div>
                </div>
                <div class="recharge-option" data-package-id="pkg_1000">
                  <div class="credits">1000 ç§¯åˆ†</div>
                  <div class="price">Â¥115</div>
                </div>
                <div class="recharge-option custom" data-package-id="pkg_custom">
                  <div class="credits">è‡ªå®šä¹‰é‡‘é¢</div>
                  <input type="number" id="wechat-custom-amount" placeholder="è¾“å…¥é‡‘é¢" min="1" step="1">
                </div>
              </div>
              <div class="tip text-muted" style="text-align:center; margin-top: 12px;">æ‰«ç æ”¯ä»˜ï¼Œäººæ°‘å¸ç»“ç®—ï¼ˆ1å…ƒ=10ç§¯åˆ†ï¼‰</div>

              <!-- å¾®ä¿¡æ”¯ä»˜äºŒç»´ç æ˜¾ç¤ºåŒºåŸŸ - é»˜è®¤æ˜¾ç¤º -->
              <div id="wechat-qr-container" class="qr-container">
                <div class="qr-header" style="color: #07c160;">
                  <span>è¯·ä½¿ç”¨å¾®ä¿¡æ‰«æäºŒç»´ç å®Œæˆæ”¯ä»˜</span>
                </div>
                <div class="qr-content">
                  <div class="qr-loading" id="wechat-qr-loading">
                    <div class="spinner" style="border-top-color: #07c160;"></div>
                    æ­£åœ¨ç”Ÿæˆæ”¯ä»˜äºŒç»´ç ...
                  </div>
                  <img id="wechat-qr-image" class="qr-image hidden" alt="å¾®ä¿¡æ”¯ä»˜äºŒç»´ç ">
                  <div class="qr-info">
                    <div class="amount">æ”¯ä»˜é‡‘é¢: <strong>Â¥<span id="wechat-qr-pay-amount">14</span></strong></div>
                    <div class="credits-info">å……å€¼ç§¯åˆ†: <strong><span id="wechat-qr-credits-amount">100</span> ç§¯åˆ†</strong>
                    </div>
                  </div>
                </div>
                <div class="qr-status" id="wechat-pay-status">
                  <span class="status-waiting">â³ ç­‰å¾…æ”¯ä»˜ä¸­...</span>
                </div>
              </div>
            </div>

          </div>
        </div>

        <div class="card">
          <h3 class="section-title" data-i18n="credits.history.title">ç§¯åˆ†å˜åŠ¨å†å²</h3>
          <table id="credits-table">
            <thead>
              <tr>
                <th data-i18n="credits.col.time">æ—¶é—´</th>
                <th data-i18n="credits.col.reason">å˜åŠ¨åŸå› </th>
                <th data-i18n="credits.col.change">ç§¯åˆ†å˜åŠ¨</th>
                <th data-i18n="credits.col.related_id">å…³è”ID</th>
              </tr>
            </thead>
            <tbody id="credits-tbody"></tbody>
          </table>
          <div class="pagination">
            <button type="button" class="btn btn-secondary" id="credits-prev-page"
              data-i18n="credits.btn.prev">ä¸Šä¸€é¡µ</button>
            <div id="credits-page-info" class="text-muted">ç¬¬ 1 / 1 é¡µ</div>
            <button type="button" class="btn btn-secondary" id="credits-next-page"
              data-i18n="credits.btn.next">ä¸‹ä¸€é¡µ</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js?v=20251231-1"></script>
  <script>
    (function () {
      const wrapper = document.getElementById('contactTrigger');
      if (!wrapper) return;
      const popover = wrapper.querySelector('.contact-popover');
      const toggle = (show) => {
        wrapper.classList.toggle('show', show);
        popover?.setAttribute('aria-hidden', show ? 'false' : 'true');
      };
      wrapper.addEventListener('mouseenter', () => toggle(true));
      wrapper.addEventListener('mouseleave', () => toggle(false));
      wrapper.addEventListener('click', (e) => {
        e.stopPropagation();
        toggle(!wrapper.classList.contains('show'));
      });
      document.addEventListener('click', () => toggle(false));

      // è§†å›¾åˆ‡æ¢é€»è¾‘
      const landingContainer = document.getElementById('login-container');
      const authContainer = document.getElementById('auth-container');
      const loginBtn = document.getElementById('nav-login-btn');
      const heroLoginBtn = document.getElementById('hero-login-btn');
      const backHomeBtn = document.getElementById('back-home-btn');

      const authLoginPane = document.getElementById('auth-login');

      const showLoginView = () => {
        landingContainer.classList.add('hidden');
        authContainer.classList.remove('hidden');
        authLoginPane.style.display = 'block';
      };

      const showLandingView = () => {
        authContainer.classList.add('hidden');
        landingContainer.classList.remove('hidden');
      };

      loginBtn?.addEventListener('click', showLoginView);
      heroLoginBtn?.addEventListener('click', showLoginView);
      backHomeBtn?.addEventListener('click', showLandingView);
    })();
  </script>
</body>

</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI视频批量生成</title>
  <link rel="stylesheet" href="/css/app.css" />
</head>
<body>
  <div id="toast-container"></div>

  <div id="login-container" class="login-container">
    <form id="login-form" class="login-card" autocomplete="off" novalidate>
      <h1>🎬 AI视频生成平台</h1>
      <div class="form-group">
        <label for="login-username">用户名</label>
        <input type="text" id="login-username" name="username" placeholder="请输入用户名" autocomplete="username" />
      </div>
      <div class="form-group">
        <label for="login-password">密码</label>
        <input type="password" id="login-password" name="password" placeholder="请输入密码" autocomplete="current-password" />
      </div>
      <button type="submit" class="btn btn-primary" id="login-submit">登录</button>
      <div class="error-msg" id="login-error"></div>
    </form>
  </div>

  <div id="app-container" class="container hidden">
    <header>
      <h1>🎬 AI视频批量生成</h1>
      <div class="user-info">
        <span id="user-display"></span>
        <span id="user-credits" class="text-muted"></span>
        <button type="button" class="btn btn-secondary" id="logout-btn">退出登录</button>
      </div>
    </header>

    <div class="card">
      <div class="three-col-layout">
        <div class="col-image">
          <h3 class="section-title">图片</h3>
          <input type="file" id="image-file" class="image-input" accept="image/png, image/jpeg" />
          <img id="thumb" class="hidden" alt="上传预览" />
          <button type="button" class="btn btn-secondary remove-btn hidden" id="remove-img">删除图片</button>
        </div>

        <div class="col-prompt">
          <h3 class="section-title">提示词 Prompt</h3>
          <textarea id="prompt" class="prompt-textarea" placeholder="请输入视频生成提示词（必填，≤10000字符）"></textarea>
        </div>

        <div class="col-params">
          <h3 class="section-title">模型参数</h3>
          <div class="param-group">
            <label for="model">模型</label>
            <select id="model">
              <option value="sora-2">Sora 2</option>
              <option value="sora-2-pro">Sora 2 Pro</option>
            </select>
          </div>
          <div class="param-group">
            <label for="orientation">方向</label>
            <select id="orientation">
              <option value="landscape">横向</option>
              <option value="portrait">纵向</option>
            </select>
          </div>
          <div class="param-group">
            <label for="size">尺寸</label>
            <select id="size">
              <option value="small">720p</option>
              <option value="large">1080p</option>
            </select>
          </div>
          <div class="param-group">
            <label for="duration">时长</label>
            <select id="duration"></select>
          </div>
          <div class="param-group">
            <label for="num-videos">视频数量</label>
            <input type="number" id="num-videos" value="1" min="1" max="50" />
          </div>
        </div>
      </div>

      <div class="generate-btn-container">
        <button type="button" class="generate-btn" id="generate-btn">🎬 生成视频</button>
      </div>
    </div>

    <div class="card">
      <h3>任务管理 <span class="text-muted subtitle">(点击行查看详情)</span></h3>
      <table id="batch-table">
        <thead>
          <tr>
            <th style="width:50px;">序号</th>
            <th style="width:160px;">创建时间</th>
            <th style="width:350px;">提示词</th>
            <th style="width:80px;">图片</th>
            <th style="width:160px;">状态</th>
            <th style="width:240px;">操作</th>
          </tr>
        </thead>
        <tbody id="batch-tbody"></tbody>
      </table>

      <div class="pagination">
        <button type="button" class="btn btn-secondary" id="prev-page">上一页</button>
        <div id="page-info" class="text-muted">第 1 / 1 页</div>
        <button type="button" class="btn btn-secondary" id="next-page">下一页</button>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
